import{P as Y}from"./index-CaS5ecGD.js";import{a as C,_ as b}from"./entry/index-nrenXBHR-1717431353170.js";import{h as j,U as S,V as ee}from"./antd-BHcOFGwY.js";import{d as ae,f as p,r as te,a7 as r,Z as i,a8 as U,a9 as o,$ as h,k as t,G as D,_ as N,F as R,aa as E,ag as F,ab as z,a0 as oe,u as A}from"./vue-BR4kA91-.js";import"./useContentViewHeight-DWJbGTOw.js";import"./useWindowSizeFn-CJLxKXUm.js";import"./onMountedOrActivated-Ct_sYMl9.js";const ne={style:{display:"flex","justify-content":"center"}},le=["src"],se=["href","onClick"],re=["onClick"],ue=["onClick"],ce=ae({__name:"index",setup(ie){const[k,G]=j.useNotification(),m=p(""),f=p([]),$=p([]),n=te({id:"",categoryName:"娱乐夹",url:"",urlName:"",favicon:""}),H=p([]),I={categoryName:[{required:!0,message:"请选择收藏夹"}],url:[{required:!0,message:"请输入链接"}],urlName:[{required:!0,message:"请输入链接名称"}],favicon:[{required:!1,message:"请输入favicon地址"}]},_=p(!1),x=()=>{C.get(`${w}api/bookmarks?categoryName=娱乐夹`).then(a=>{const e=S(a,"data");e.success?(f.value=e.data,H.value=e.data.map(s=>s.categoryName),$.value=JSON.parse(JSON.stringify(e.data))):k.info({message:e.code,description:e.message,placement:"topRight"})})},L=(a,e)=>{a.preventDefault(),C.delete(`${w}api/bookmarks/${e.id}`).then(s=>{const u=S(s,"data");u.success?x():k.info({message:u.code,description:u.message,placement:"topRight"})})},W=(a,e,s)=>{a.preventDefault(),B({id:s.id,categoryName:e.categoryName,urlName:s.name,url:s.url,favicon:s.favicon})},B=a=>{n.id=a==null?void 0:a.id,n.categoryName="娱乐夹",n.urlName=a==null?void 0:a.urlName,n.url=a==null?void 0:a.url,n.favicon=a==null?void 0:a.favicon,_.value=!0},V=()=>{_.value=!1},Z=()=>{_.value=!1,C[n.id?"put":"post"](`${w}api/bookmarks/${n.id?n.id:""}`,n).then(a=>{const e=S(a,"data");e.success?x():k.info({message:e.code,description:e.message,placement:"topRight"})})},w="https://1.94.182.143:8000/";x();const K=(a,e)=>{a.preventDefault(),window.open(e,"_blank")},q=()=>{ee(()=>{m.value?f.value.forEach(e=>{e.urls=e.urls.filter(s=>s.name.includes(m.value))}):f.value=JSON.parse(JSON.stringify($.value))},500)()};return(a,e)=>{const s=r("a-input-search"),u=r("a-button"),J=r("a-card"),v=r("a-input"),g=r("a-form-item"),y=r("a-col"),O=r("a-row"),M=r("a-form"),Q=r("a-space"),X=r("a-drawer");return i(),U(A(Y),{title:"娱乐书签"},{default:o(()=>[h("div",ne,[t(s,{value:m.value,"onUpdate:value":e[0]||(e[0]=l=>m.value=l),placeholder:"请输入网站名称",style:{width:"600px","margin-bottom":"16px"},"enter-button":"",onSearch:q,onChange:q},null,8,["value"]),t(u,{type:"primary",style:{"margin-left":"5px"},onClick:B},{default:o(()=>[D("新增")]),_:1})]),(i(!0),N(R,null,E(f.value,(l,T)=>(i(),N("div",{key:T,style:F({marginTop:T!==0?"16px":"0px"})},[l.urls.length?(i(),U(J,{key:0,title:l.categoryName},{default:o(()=>[(i(!0),N(R,null,E(l.urls,(c,P)=>(i(),U(J,{key:P,style:F({marginTop:P!==0?"16px":"0px"})},{default:o(()=>[c.favicon?(i(),N("img",{key:0,src:c.favicon,alt:"链接",class:"favicon"},null,8,le)):z("",!0),h("a",{href:c.url,onClick:d=>K(d,c.url)},oe(c.name),9,se),h("a",{style:{padding:"0 5px",float:"right"},onClick:d=>L(d,c)},"删除",8,re),h("a",{style:{padding:"0 5px",float:"right"},onClick:d=>W(d,l,c)},"编辑",8,ue)]),_:2},1032,["style"]))),128))]),_:2},1032,["title"])):z("",!0)],4))),128)),t(X,{title:"新增书签",width:720,open:_.value,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:V},{extra:o(()=>[t(Q,null,{default:o(()=>[t(u,{onClick:V},{default:o(()=>[D("取消")]),_:1}),t(u,{type:"primary",onClick:Z},{default:o(()=>[D("保存")]),_:1})]),_:1})]),default:o(()=>[t(M,{model:n,rules:I,layout:"vertical"},{default:o(()=>[t(O,{gutter:16},{default:o(()=>[t(y,{span:12},{default:o(()=>[t(g,{label:"收藏夹",name:"name"},{default:o(()=>[t(v,{value:n.categoryName,"onUpdate:value":e[1]||(e[1]=l=>n.categoryName=l),style:{width:"100%"},disabled:""},null,8,["value"])]),_:1})]),_:1}),t(y,{span:12},{default:o(()=>[t(g,{label:"链接名称",name:"urlName"},{default:o(()=>[t(v,{value:n.urlName,"onUpdate:value":e[2]||(e[2]=l=>n.urlName=l),style:{width:"100%"},placeholder:"请输入链接名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(O,{gutter:16},{default:o(()=>[t(y,{span:12},{default:o(()=>[t(g,{label:"链接",name:"url"},{default:o(()=>[t(v,{value:n.url,"onUpdate:value":e[3]||(e[3]=l=>n.url=l),style:{width:"100%"},placeholder:"请输入链接地址"},null,8,["value"])]),_:1})]),_:1}),t(y,{span:12},{default:o(()=>[t(g,{label:"favicon",name:"favicon"},{default:o(()=>[t(v,{value:n.favicon,"onUpdate:value":e[4]||(e[4]=l=>n.favicon=l),style:{width:"100%"},placeholder:"请输入favicon地址"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(A(G))]),_:1})}}}),ye=b(ce,[["__scopeId","data-v-35e592d0"]]);export{ye as default};
