var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var z=(e,m,b)=>m in e?Z(e,m,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[m]=b,u=(e,m)=>{for(var b in m||(m={}))oe.call(m,b)&&z(e,b,m[b]);if(W)for(var b of W(m))se.call(m,b)&&z(e,b,m[b]);return e},H=(e,m)=>ee(e,te(m));import{c as q,u as o,d as ne,I as le,m as ae,k as p,i as re,ac as J,A as ce,G as ie}from"./vue-gN4NnATS.js";import{c as $}from"./componentMap-fMN2IhCj.js";import{v as E,j as de,O as fe,Q as ue}from"./entry/index-YYm-3Pll-1717503973898.js";import{i as me,N as K,c as G,s as he}from"./helper-C4je1pfN.js";import{ad as pe,e as g,ai as F,Y as Q,a7 as be,a5 as U,f as ge,r as ye,w as Ce}from"./antd-B_Joh_oh.js";function Pe(e){return"slot"in e}function xe(e){return!Pe(e)}function we(e,m){return q(()=>{const b=o(e),{labelCol:L={},wrapperCol:M={}}=b.itemProps||{},{labelWidth:N,disabledLabelWidth:h}=b,{labelWidth:C,labelCol:j,wrapperCol:O,layout:T}=o(m);if(!C&&!N&&!j||h)return L.style={textAlign:"left"},{labelCol:L,wrapperCol:M};let w=N||C;const V=u(u({},j),L),D=u(u({},O),M);return w&&(w=pe(w)?`${w}px`:w),{labelCol:u({style:{width:w}},V),wrapperCol:u({style:{width:T==="vertical"?"100%":`calc(100% - ${w})`}},D)}})}function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!re(e)}const Le=ne({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:m}){const{t:b}=de(),{schema:L,formProps:M}=le(e);L.value.component==="CropperAvatar"&&typeof M.value.size=="string"&&(M.value.size=void 0);const N=we(L,M),h=q(()=>{const{allDefaultValues:s,formModel:t,schema:r}=e,{mergeDynamicData:a}=e.formProps;return{field:r.field,model:t,values:u(u(u({},a),s),t),schema:r}}),C=q(()=>{var c;const{schema:s,tableAction:t,formModel:r,formActionType:a}=e;let{componentProps:l={}}=s;return g(l)&&(l=(c=l({schema:s,tableAction:t,formModel:r,formActionType:a}))!=null?c:{}),me(s.component)&&(l=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},l)),l}),j=q(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:r=!1}=o(C);let a=!!s||r;return F(t)&&(a=t),g(t)&&(a=t(o(h))),a}),O=q(()=>{const{readonly:s}=e.formProps,{dynamicReadonly:t}=e.schema,{readonly:r=!1}=o(C);let a=s||r;return F(t)&&(a=t),g(t)&&(a=t(o(h))),a});function T(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:r}=e.formProps,a=r&&F(e.isAdvanced)?e.isAdvanced:!0;let l=!0,c=!0;return F(s)&&(l=s),F(t)&&(c=t),g(s)&&(l=s(o(h))),g(t)&&(c=t(o(h))),l=l&&a,{isShow:l,isIfShow:c}}function w(){var R;const{rules:s=[],component:t,rulesMessageJoinLabel:r,label:a,dynamicRules:l,required:c}=e.schema;if(g(l))return l(o(h));let n=ge(s);const{rulesMessageJoinLabel:A}=e.formProps,S=(Reflect.has(e.schema,"rulesMessageJoinLabel")?r:A)?g(a)?"":a:"",P=t?G(t)+S:S;function i(f,d){const x=f.message||P;return d===void 0||ye(d)||Array.isArray(d)&&d.length===0||typeof d=="string"&&d.trim()===""||typeof d=="object"&&Reflect.has(d,"checked")&&Reflect.has(d,"halfChecked")&&Array.isArray(d.checked)&&Array.isArray(d.halfChecked)&&d.checked.length===0&&d.halfChecked.length===0?Promise.reject(x):Promise.resolve()}const v=g(c)?c(o(h)):c;if(v)if(!n||n.length===0){const f=K.includes(t||"Input")?"blur":"change";n=[{required:v,validator:i,trigger:f}]}else n.findIndex(d=>Reflect.has(d,"required"))===-1&&n.push({required:v,validator:i});const k=n.findIndex(f=>Reflect.has(f,"required")&&!Reflect.has(f,"validator"));if(k!==-1){const f=n[k],{isShow:d}=T();if(d||(f.required=!1),t){f.message=f.message||P,(t.includes("Input")||t.includes("Textarea"))&&(f.whitespace=!0);const x=(R=o(C))==null?void 0:R.valueFormat;he(f,t,x)}}const y=n.findIndex(f=>f.max);return y!==-1&&!n[y].validator&&(n[y].message=n[y].message||b("component.form.maxTip",[n[y].max])),n}function V(){var f;if(!xe(e.schema))return null;const{renderComponentContent:s,component:t,field:r,changeEvent:a="change",valueField:l}=e.schema,c=t&&["Switch","Checkbox"].includes(t),n=`on${Ce(a)}`,A={[n]:(...d)=>{const[x]=d,B=x?x.target:null,X=B?c?B.checked:B.value:x;e.setFormModel(r,X,e.schema),i[n]&&i[n](...d)}},I=$.get(t),{autoSetPlaceHolder:S,size:P}=e.formProps,i=H(u({allowClear:!0,size:P},o(C)),{disabled:o(j),readonly:o(O)});!i.disabled&&S&&t!=="RangePicker"&&t&&(i.placeholder=((f=o(C))==null?void 0:f.placeholder)||G(t)),i.codeField=r,i.formValues=o(h);const k={[l||(c?"checked":"value")]:e.formModel[r]},y=u(u(u({},i),A),k);if(!s)return p(I,y,null);const R=g(s)?u({},s(o(h),{disabled:o(j),readonly:o(O)})):{default:()=>s};return p(I,y,_(R)?R:{default:()=>[R]})}function D(){const{label:s,helpMessage:t,helpComponentProps:r,subLabel:a}=e.schema,l=g(s)?s(o(h)):s,c=a?p("span",null,[l,ie(" "),p("span",{class:"text-secondary"},[a])]):l,n=g(t)?t(o(h)):t;return!n||Array.isArray(n)&&n.length===0?c:p("span",null,[c,p(ue,J({placement:"top",class:"mx-1",text:n},r),null)])}function Y(){const{itemProps:s,slot:t,render:r,field:a,suffix:l,component:c,prefix:n}=e.schema,{labelCol:A,wrapperCol:I}=o(N),{colon:S}=e.formProps,P={disabled:o(j),readonly:o(O)};if(c==="Divider"){let i;return p(Q,{span:24},{default:()=>[p(be,o(C),_(i=D())?i:{default:()=>[i]})]})}else if(c==="BasicTitle"){let i;return p(U.Item,{labelCol:A,wrapperCol:I,name:a,class:{"suffix-item":!!l,"prefix-item":!!n}},{default:()=>[p(fe,o(C),_(i=D())?i:{default:()=>[i]})]})}else{const i=()=>t?E(m,t,o(h),P):r?r(o(h),P):V(),v=!!l,k=g(l)?l(o(h)):l,y=!!n,R=g(n)?n(o(h)):n;return c&&K.includes(c)&&e.schema&&(e.schema.itemProps=u({autoLink:!1},e.schema.itemProps)),p(U.Item,J({name:a,colon:S,class:{"suffix-item":v,"prefix-item":y}},s,{label:D(),rules:w(),labelCol:A,wrapperCol:I}),{default:()=>[p("div",{style:"display:flex"},[y&&p("span",{class:"prefix"},[R]),p("div",{style:"flex:1;"},[i()]),v&&p("span",{class:"suffix"},[k])])]})}}return()=>{let s;const{colProps:t={},colSlot:r,renderColContent:a,component:l,slot:c}=e.schema;if(!(l&&$.has(l)||c))return null;const{baseColProps:n={}}=e.formProps,A=u(u({},n),t),{isIfShow:I,isShow:S}=T(),P=o(h),i={disabled:o(j),readonly:o(O)};return I&&ae(p(Q,A,_(s=r?E(m,r,P,i):a?a(P,i):Y())?s:{default:()=>[s]}),[[ce,S]])}}});export{Le as _};
