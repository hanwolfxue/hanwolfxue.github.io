import{P as Y}from"./index-DHJ-N9Yc.js";import{a as C,_ as b}from"./entry/index-BwJ41R5L-1717470460305.js";import{h as j,U as S,V as ee}from"./antd-BHcOFGwY.js";import{d as ae,f as p,r as te,a7 as r,Z as i,a8 as U,a9 as n,$ as m,k as t,G as D,_ as N,F as P,aa as R,ag as ne,ab as T,a0 as oe,u as E}from"./vue-BR4kA91-.js";import"./useContentViewHeight-CbJ2DFmO.js";import"./useWindowSizeFn-CSHZwHVf.js";import"./onMountedOrActivated-Ct_sYMl9.js";const le={style:{display:"flex","justify-content":"center"}},se=["src"],re=["href","onClick"],ce={style:{"margin-top":"5px"}},ue=["onClick"],ie=["onClick"],de=ae({__name:"index",setup(pe){const[k,F]=j.useNotification(),f=p(""),_=p([]),$=p([]),o=te({id:"",categoryName:"娱乐夹",url:"",urlName:"",favicon:""}),z=p([]),A={categoryName:[{required:!0,message:"请选择收藏夹"}],url:[{required:!0,message:"请输入链接"}],urlName:[{required:!0,message:"请输入链接名称"}],favicon:[{required:!1,message:"请输入favicon地址"}]},v=p(!1),x=()=>{C.get(`${w}api/bookmarks?categoryName=娱乐夹`).then(a=>{const e=S(a,"data");e.success?(_.value=e.data,z.value=e.data.map(s=>s.categoryName),$.value=JSON.parse(JSON.stringify(e.data))):k.info({message:e.code,description:e.message,placement:"topRight"})})},G=(a,e)=>{a.preventDefault(),C.delete(`${w}api/bookmarks/${e.id}`).then(s=>{const c=S(s,"data");c.success?x():k.info({message:c.code,description:c.message,placement:"topRight"})})},H=(a,e,s)=>{a.preventDefault(),B({id:s.id,categoryName:e.categoryName,urlName:s.name,url:s.url,favicon:s.favicon})},B=a=>{o.id=a==null?void 0:a.id,o.categoryName="娱乐夹",o.urlName=a==null?void 0:a.urlName,o.url=a==null?void 0:a.url,o.favicon=a==null?void 0:a.favicon,v.value=!0},V=()=>{v.value=!1},I=()=>{v.value=!1,C[o.id?"put":"post"](`${w}api/bookmarks/${o.id?o.id:""}`,o).then(a=>{const e=S(a,"data");e.success?x():k.info({message:e.code,description:e.message,placement:"topRight"})})},w="https://1.94.182.143:8000/";x();const L=(a,e)=>{a.preventDefault(),window.open(e,"_blank")},q=()=>{ee(()=>{f.value?_.value.forEach(e=>{e.urls=e.urls.filter(s=>s.name.includes(f.value))}):_.value=JSON.parse(JSON.stringify($.value))},500)()};return(a,e)=>{const s=r("a-input-search"),c=r("a-button"),W=r("a-card-grid"),Z=r("a-card"),g=r("a-input"),y=r("a-form-item"),h=r("a-col"),J=r("a-row"),K=r("a-form"),M=r("a-space"),Q=r("a-drawer");return i(),U(E(Y),{title:"娱乐书签"},{default:n(()=>[m("div",le,[t(s,{value:f.value,"onUpdate:value":e[0]||(e[0]=l=>f.value=l),placeholder:"请输入网站名称",style:{width:"600px","margin-bottom":"16px"},"enter-button":"",onSearch:q,onChange:q},null,8,["value"]),t(c,{type:"primary",style:{"margin-left":"5px"},onClick:B},{default:n(()=>[D("新增")]),_:1})]),(i(!0),N(P,null,R(_.value,(l,O)=>(i(),N("div",{key:O,style:ne({marginTop:O!==0?"16px":"0px"})},[l.urls.length?(i(),U(Z,{key:0,style:{cursor:"pointer"},title:l.categoryName},{default:n(()=>[(i(!0),N(P,null,R(l.urls,(u,X)=>(i(),U(W,{key:X,style:{width:"10%","text-align":"center"}},{default:n(()=>[u.favicon?(i(),N("img",{key:0,src:u.favicon,alt:"链接",class:"favicon"},null,8,se)):T("",!0),m("a",{href:u.url,onClick:d=>L(d,u.url)},oe(u.name),9,re),m("div",ce,[m("a",{style:{padding:"0 5px"},onClick:d=>H(d,l,u)},"编辑",8,ue),m("a",{style:{padding:"0 5px"},onClick:d=>G(d,u)},"删除",8,ie)])]),_:2},1024))),128))]),_:2},1032,["title"])):T("",!0)],4))),128)),t(Q,{title:"新增书签",width:720,open:v.value,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:V},{extra:n(()=>[t(M,null,{default:n(()=>[t(c,{onClick:V},{default:n(()=>[D("取消")]),_:1}),t(c,{type:"primary",onClick:I},{default:n(()=>[D("保存")]),_:1})]),_:1})]),default:n(()=>[t(K,{model:o,rules:A,layout:"vertical"},{default:n(()=>[t(J,{gutter:16},{default:n(()=>[t(h,{span:12},{default:n(()=>[t(y,{label:"收藏夹",name:"name"},{default:n(()=>[t(g,{value:o.categoryName,"onUpdate:value":e[1]||(e[1]=l=>o.categoryName=l),style:{width:"100%"},disabled:""},null,8,["value"])]),_:1})]),_:1}),t(h,{span:12},{default:n(()=>[t(y,{label:"链接名称",name:"urlName"},{default:n(()=>[t(g,{value:o.urlName,"onUpdate:value":e[2]||(e[2]=l=>o.urlName=l),style:{width:"100%"},placeholder:"请输入链接名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(J,{gutter:16},{default:n(()=>[t(h,{span:12},{default:n(()=>[t(y,{label:"链接",name:"url"},{default:n(()=>[t(g,{value:o.url,"onUpdate:value":e[3]||(e[3]=l=>o.url=l),style:{width:"100%"},placeholder:"请输入链接地址"},null,8,["value"])]),_:1})]),_:1}),t(h,{span:12},{default:n(()=>[t(y,{label:"favicon",name:"favicon"},{default:n(()=>[t(g,{value:o.favicon,"onUpdate:value":e[4]||(e[4]=l=>o.favicon=l),style:{width:"100%"},placeholder:"请输入favicon地址"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(E(F))]),_:1})}}}),Ne=b(de,[["__scopeId","data-v-5f69d111"]]);export{Ne as default};
