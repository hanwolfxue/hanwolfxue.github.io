import{P as X}from"./index-DDpk9mKf.js";import{a as w}from"./index-DVJ1Sj3i.js";import{h as Y,U as C,V as b}from"./antd-B_Joh_oh.js";import{d as j,f as m,r as ee,a7 as r,Z as u,a8 as S,a9 as o,$ as f,k as t,G as U,_ as k,F as O,aa as $,ag as ae,ab as T,a0 as te,u as E}from"./vue-gN4NnATS.js";import{_ as oe}from"./entry/index-B0nMuAdn-1717508002020.js";import"./useContentViewHeight-DdUyUmSn.js";import"./useWindowSizeFn-CY1G17qn.js";import"./onMountedOrActivated-D-SrSxhb.js";const ne={style:{display:"flex","justify-content":"center"}},se=["src"],le=["href","onClick"],re={style:{"margin-top":"5px"}},ce=["onClick"],ie=["onClick"],ue=j({__name:"index",setup(de){const[d,F]=Y.useNotification(),_=m(""),g=m([]),D=m([]),n=ee({id:"",categoryName:"娱乐夹",url:"",urlName:"",favicon:""}),P=m([]),z={categoryName:[{required:!0,message:"请选择收藏夹"}],url:[{required:!0,message:"请输入链接"}],urlName:[{required:!0,message:"请输入链接名称"}],favicon:[{required:!1,message:"请输入favicon地址"}]},v=m(!1),x=()=>{w.get("/api/bookmarks?categoryName=娱乐夹").then(e=>{const a=C(e,"data");a.success?(g.value=a.data,P.value=a.data.map(s=>s.categoryName),D.value=JSON.parse(JSON.stringify(a.data))):d.info({message:a.code,description:a.message,placement:"topRight"})},e=>{d.info({message:e.code,description:e.message,placement:"topRight"})})},A=(e,a)=>{e.preventDefault(),w.delete(`/api/bookmarks/${a.id}`).then(s=>{const c=C(s,"data");c.success?x():d.info({message:c.code,description:c.message,placement:"topRight"})},s=>{d.info({message:s.code,description:s.message,placement:"topRight"})})},G=(e,a,s)=>{e.preventDefault(),R({id:s.id,categoryName:a.categoryName,urlName:s.name,url:s.url,favicon:s.favicon})},R=e=>{n.id=e==null?void 0:e.id,n.categoryName="娱乐夹",n.urlName=e==null?void 0:e.urlName,n.url=e==null?void 0:e.url,n.favicon=e==null?void 0:e.favicon,v.value=!0},B=()=>{v.value=!1},H=()=>{v.value=!1,w[n.id?"put":"post"](`/api/bookmarks/${n.id?n.id:""}`,n).then(e=>{const a=C(e,"data");a.success?x():d.info({message:a.code,description:a.message,placement:"topRight"})},e=>{d.info({message:e.code,description:e.message,placement:"topRight"})})};x();const I=(e,a)=>{e.preventDefault(),window.open(a,"_blank")},V=()=>{b(()=>{_.value?g.value.forEach(a=>{a.urls=a.urls.filter(s=>s.name.includes(_.value))}):g.value=JSON.parse(JSON.stringify(D.value))},500)()};return(e,a)=>{const s=r("a-input-search"),c=r("a-button"),L=r("a-card-grid"),W=r("a-card"),y=r("a-input"),h=r("a-form-item"),N=r("a-col"),q=r("a-row"),Z=r("a-form"),K=r("a-space"),M=r("a-drawer");return u(),S(E(X),{title:"娱乐书签"},{default:o(()=>[f("div",ne,[t(s,{value:_.value,"onUpdate:value":a[0]||(a[0]=l=>_.value=l),placeholder:"请输入网站名称",style:{width:"600px","margin-bottom":"16px"},"enter-button":"",onSearch:V,onChange:V},null,8,["value"]),t(c,{type:"primary",style:{"margin-left":"5px"},onClick:R},{default:o(()=>[U("新增")]),_:1})]),(u(!0),k(O,null,$(g.value,(l,J)=>(u(),k("div",{key:J,style:ae({marginTop:J!==0?"16px":"0px"})},[l.urls.length?(u(),S(W,{key:0,style:{cursor:"pointer"},title:l.categoryName},{default:o(()=>[(u(!0),k(O,null,$(l.urls,(i,Q)=>(u(),S(L,{key:Q,style:{width:"10%","text-align":"center"}},{default:o(()=>[i.favicon?(u(),k("img",{key:0,src:i.favicon,alt:"链接",class:"favicon"},null,8,se)):T("",!0),f("a",{href:i.url,onClick:p=>I(p,i.url)},te(i.name),9,le),f("div",re,[f("a",{style:{padding:"0 5px"},onClick:p=>G(p,l,i)},"编辑",8,ce),f("a",{style:{padding:"0 5px"},onClick:p=>A(p,i)},"删除",8,ie)])]),_:2},1024))),128))]),_:2},1032,["title"])):T("",!0)],4))),128)),t(M,{title:"新增书签",width:720,open:v.value,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:B},{extra:o(()=>[t(K,null,{default:o(()=>[t(c,{onClick:B},{default:o(()=>[U("取消")]),_:1}),t(c,{type:"primary",onClick:H},{default:o(()=>[U("保存")]),_:1})]),_:1})]),default:o(()=>[t(Z,{model:n,rules:z,layout:"vertical"},{default:o(()=>[t(q,{gutter:16},{default:o(()=>[t(N,{span:12},{default:o(()=>[t(h,{label:"收藏夹",name:"name"},{default:o(()=>[t(y,{value:n.categoryName,"onUpdate:value":a[1]||(a[1]=l=>n.categoryName=l),style:{width:"100%"},disabled:""},null,8,["value"])]),_:1})]),_:1}),t(N,{span:12},{default:o(()=>[t(h,{label:"链接名称",name:"urlName"},{default:o(()=>[t(y,{value:n.urlName,"onUpdate:value":a[2]||(a[2]=l=>n.urlName=l),style:{width:"100%"},placeholder:"请输入链接名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:16},{default:o(()=>[t(N,{span:12},{default:o(()=>[t(h,{label:"链接",name:"url"},{default:o(()=>[t(y,{value:n.url,"onUpdate:value":a[3]||(a[3]=l=>n.url=l),style:{width:"100%"},placeholder:"请输入链接地址"},null,8,["value"])]),_:1})]),_:1}),t(N,{span:12},{default:o(()=>[t(h,{label:"favicon",name:"favicon"},{default:o(()=>[t(y,{value:n.favicon,"onUpdate:value":a[4]||(a[4]=l=>n.favicon=l),style:{width:"100%"},placeholder:"请输入favicon地址"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(E(F))]),_:1})}}}),Ne=oe(ue,[["__scopeId","data-v-2f03b19d"]]);export{Ne as default};
