import{P as oe}from"./index-C2FojmvI.js";import{a as D}from"./index-C8ck0Ekn.js";import{h as le,U as S,V as se}from"./antd-B_Joh_oh.js";import{d as I,f as c,r as re,a7 as r,Z as d,a8 as V,a9 as n,$ as _,k as t,G as w,_ as C,F as P,aa as z,ag as ue,ab as A,a0 as ie,u as q}from"./vue-gN4NnATS.js";import{_ as ce}from"./entry/index-YYm-3Pll-1717503973898.js";import"./useContentViewHeight-BlDRflCK.js";import"./useWindowSizeFn-B-NbT5Sn.js";import"./onMountedOrActivated-D-SrSxhb.js";const de={style:{display:"flex","justify-content":"center"}},pe=["src"],me=["href","onClick"],fe={style:{"margin-top":"5px"}},_e=["onClick"],ve=["onClick"],ge=I({__name:"index",setup(ye){const[p,G]=le.useNotification(),H=I({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),v=c(""),g=c([]),B=c([]),o=re({id:"",categoryName:"",url:"",urlName:"",favicon:""}),O=c(),m=c(),R=c([]),L={categoryName:[{required:!0,message:"请选择收藏夹"}],url:[{required:!0,message:"请输入链接"}],urlName:[{required:!0,message:"请输入链接名称"}],favicon:[{required:!1,message:"请输入favicon地址"}]},y=c(!1),U=()=>{D.get("/api/bookmarks").then(e=>{const a=S(e,"data");a.success?(g.value=a.data,R.value=a.data.map(s=>s.categoryName),B.value=JSON.parse(JSON.stringify(a.data))):p.info({message:a.code,description:a.message,placement:"topRight"})},e=>{p.info({message:e.code,description:e.message,placement:"topRight"})})},W=e=>{e.preventDefault(),m.value&&(R.value.push(m.value),m.value="",setTimeout(()=>{var a;(a=O.value)==null||a.focus()},0))},Z=(e,a)=>{e.preventDefault(),D.delete(`/api/bookmarks/${a.id}`).then(s=>{const u=S(s,"data");u.success?U():p.info({message:u.code,description:u.message,placement:"topRight"})},s=>{p.info({message:s.code,description:s.message,placement:"topRight"})})},K=(e,a,s)=>{e.preventDefault(),J({id:s.id,categoryName:a.categoryName,urlName:s.name,url:s.url,favicon:s.favicon})},J=e=>{o.id=e==null?void 0:e.id,o.categoryName=e==null?void 0:e.categoryName,o.urlName=e==null?void 0:e.urlName,o.url=e==null?void 0:e.url,o.favicon=e==null?void 0:e.favicon,y.value=!0},T=()=>{y.value=!1},M=()=>{y.value=!1,D[o.id?"put":"post"](`/api/bookmarks/${o.id?o.id:""}`,o).then(e=>{const a=S(e,"data");a.success?U():p.info({message:a.code,description:a.message,placement:"topRight"})},e=>{p.info({message:e.code,description:e.message,placement:"topRight"})})};U();const Q=(e,a)=>{e.preventDefault(),window.open(a,"_blank")},$=()=>{se(()=>{v.value?g.value.forEach(a=>{a.urls=a.urls.filter(s=>s.name.includes(v.value))}):g.value=JSON.parse(JSON.stringify(B.value))},500)()};return(e,a)=>{const s=r("a-input-search"),u=r("a-button"),X=r("a-card-grid"),Y=r("a-card"),b=r("a-divider"),h=r("a-input"),j=r("plus-outlined"),E=r("a-space"),ee=r("a-select"),N=r("a-form-item"),k=r("a-col"),F=r("a-row"),ae=r("a-form"),te=r("a-drawer");return d(),V(q(oe),{title:"工作书签"},{default:n(()=>[_("div",de,[t(s,{value:v.value,"onUpdate:value":a[0]||(a[0]=l=>v.value=l),placeholder:"请输入网站名称",style:{width:"600px","margin-bottom":"16px"},"enter-button":"",onSearch:$,onChange:$},null,8,["value"]),t(u,{type:"primary",style:{"margin-left":"5px"},onClick:J},{default:n(()=>[w("新增")]),_:1})]),(d(!0),C(P,null,z(g.value,(l,x)=>(d(),C("div",{key:x,style:ue({marginTop:x!==0?"16px":"0px"})},[l.urls.length?(d(),V(Y,{key:0,style:{cursor:"pointer"},title:l.categoryName},{default:n(()=>[(d(!0),C(P,null,z(l.urls,(i,ne)=>(d(),V(X,{key:ne,style:{width:"10%","text-align":"center"}},{default:n(()=>[i.favicon?(d(),C("img",{key:0,src:i.favicon,alt:"链接",class:"favicon"},null,8,pe)):A("",!0),_("a",{href:i.url,onClick:f=>Q(f,i.url)},ie(i.name),9,me),_("div",fe,[_("a",{style:{padding:"0 5px"},onClick:f=>K(f,l,i)},"编辑",8,_e),_("a",{style:{padding:"0 5px"},onClick:f=>Z(f,i)},"删除",8,ve)])]),_:2},1024))),128))]),_:2},1032,["title"])):A("",!0)],4))),128)),t(te,{title:"新增书签",width:720,open:y.value,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:T},{extra:n(()=>[t(E,null,{default:n(()=>[t(u,{onClick:T},{default:n(()=>[w("取消")]),_:1}),t(u,{type:"primary",onClick:M},{default:n(()=>[w("保存")]),_:1})]),_:1})]),default:n(()=>[t(ae,{model:o,rules:L,layout:"vertical"},{default:n(()=>[t(F,{gutter:16},{default:n(()=>[t(k,{span:12},{default:n(()=>[t(N,{label:"收藏夹",name:"name"},{default:n(()=>[t(ee,{value:o.categoryName,"onUpdate:value":a[2]||(a[2]=l=>o.categoryName=l),placeholder:"请选择收藏夹",options:R.value.map(l=>({value:l}))},{dropdownRender:n(({menuNode:l})=>[t(q(H),{vnodes:l},null,8,["vnodes"]),t(b,{style:{margin:"4px 0"}}),t(E,{style:{padding:"4px 8px"}},{default:n(()=>[t(h,{ref_key:"inputRef",ref:O,value:m.value,"onUpdate:value":a[1]||(a[1]=x=>m.value=x),placeholder:"请输入收藏夹名"},null,8,["value"]),t(u,{type:"text",onClick:W},{icon:n(()=>[t(j)]),default:n(()=>[w(" 新增 ")]),_:1})]),_:1})]),_:1},8,["value","options"])]),_:1})]),_:1}),t(k,{span:12},{default:n(()=>[t(N,{label:"链接名称",name:"urlName"},{default:n(()=>[t(h,{value:o.urlName,"onUpdate:value":a[3]||(a[3]=l=>o.urlName=l),style:{width:"100%"},placeholder:"请输入链接名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(F,{gutter:16},{default:n(()=>[t(k,{span:12},{default:n(()=>[t(N,{label:"链接",name:"url"},{default:n(()=>[t(h,{value:o.url,"onUpdate:value":a[4]||(a[4]=l=>o.url=l),style:{width:"100%"},placeholder:"请输入链接地址"},null,8,["value"])]),_:1})]),_:1}),t(k,{span:12},{default:n(()=>[t(N,{label:"favicon",name:"favicon"},{default:n(()=>[t(h,{value:o.favicon,"onUpdate:value":a[5]||(a[5]=l=>o.favicon=l),style:{width:"100%"},placeholder:"请输入favicon地址"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(q(G))]),_:1})}}}),De=ce(ge,[["__scopeId","data-v-90857136"]]);export{De as default};
